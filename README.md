# VPN-Easy
科学上网服务器搭建简易教程（ps:  凡是基于SS, SSR的教程都无法使用）


如果使用ss或者SSR搭建服务器很快就会被封，因为这两个软件都不再继续更新了，请参考新的搭建教程

# 服务器选择
推荐[Vultr](https://www.vultr.com/?ref=8829168)(可换IP)或者[搬瓦工](https://bandwagonhost.com/aff.php?aff=65889)（速度快）
系统选择Centos

## [Vultr](https://www.vultr.com/?ref=8829168)
1. 按小时收费：按小时收费，随用随停，不会一次扣除月费
2. 免费更换 IP：与搬瓦工付费更换 IP 不同，Vultr 可以通过摧毁重建的方式免费更换 IP
3. 增加 IP 地址：Vultr 支持单独购买IP地址
4. 增加硬盘：Vultr 支持购买块存储
5. 自定义防火墙：Vultr 支持增加防火墙规则

## [搬瓦工](https://bandwagonhost.com/aff.php?aff=65889)
1. 速度快：线路选择多，基本都是国内优化的，国内速度快
2. 自动备份：搬瓦工的自动备份是免费的，保证了网站数据的安全性
3. 30 天无条件退款：如果觉得搬瓦工不合适，对于新用户搬瓦工支持 30 天内无条件退款

# 服务器端设置
运行 `wget https://git.io/vpnquickstart -O vpn.sh && sudo sh vpn.sh` 完成所有配置，记录生成的密钥

# 手机配置
1. 不同手机不太一样，首先要在设置中找到VPN选项

2. 然后选择加密类型为 L2TP/IPSec PSK

3. 填入服务器地址

4. 填入PSK(pre-shared Key)为生成的PSK, 其它不填

5. 完成配置，点击连接，如果不行可以换一个WIFI试试

# windows 配置

1. 右键单击系统托盘中的无线/网络图标。
2. 选择 打开网络和共享中心。或者，如果你使用 Windows 10 版本 1709 或以上，选择 打开"网络和 Internet"设置，然后在打开的页面中单击 网络和共享中心。
3. 单击 设置新的连接或网络。
4. 选择 连接到工作区，然后单击 下一步。
5. 单击 使用我的Internet连接 (VPN)。
6. 在 Internet地址 字段中输入你的 VPN 服务器 IP。
7. 在 目标名称 字段中输入任意内容。单击 创建。
8. 返回 网络和共享中心。单击左侧的 更改适配器设置。
9. 右键单击新创建的 VPN 连接，并选择 属性。
10. 单击 安全 选项卡，从 VPN 类型 下拉菜单中选择 "使用 IPsec 的第 2 层隧道协议 (L2TP/IPSec)"。
11. 单击 允许使用这些协议。选中 "质询握手身份验证协议 (CHAP)" 和 "Microsoft CHAP 版本 2 (MS-CHAP v2)" 复选框。
12. 单击 高级设置 按钮。
13. 单击 使用预共享密钥作身份验证 并在 密钥 字段中输入你的 VPN IPsec PSK。
14. 单击 确定 关闭 高级设置。
15. 单击 确定 保存 VPN 连接的详细信息。

首次连接VPN需要修改注册表
新建txt文件，复制REG ADD HKLM\SYSTEM\CurrentControlSet\Services\PolicyAgent /v AssumeUDPEncapsulationContextOnSendRule /t REG_DWORD /d 0x2 /f
修改后缀名为.reg，双击运行后重启电脑即可

# 苹果配置

1. 打开系统偏好设置并转到网络部分。
2. 在窗口左下角单击 + 按钮。
3. 从 接口 下拉菜单选择 VPN。
4. 从 VPN类型 下拉菜单选择 IPSec 上的 L2TP。
5. 在 服务名称 字段中输入任意内容。
6. 单击 创建。
7. 在 服务器地址 字段中输入你的 VPN 服务器 IP。
8. 在 帐户名称 字段中输入你的 VPN 用户名。
9. 单击 认证设置 按钮。
10. 在 用户认证 部分，选择 密码 单选按钮，然后输入你的 VPN 密码。
11. 在 机器认证 部分，选择 共享的密钥 单选按钮，然后输入你的 VPN IPsec PSK。
12. 保持 群组名称 字段空白。
13. 单击 好。
14. 选中 在菜单栏中显示 VPN 状态 复选框。
15. （重要） 单击 高级 按钮，并选中 通过VPN连接发送所有通信 复选框。
16. （重要） 单击 TCP/IP 选项卡，并在 配置IPv6 部分中选择 仅本地链接。
17. 单击 好 关闭高级设置，然后单击 应用 保存VPN连接信息。
